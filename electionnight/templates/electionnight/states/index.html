{% extends 'electionnight/base.html' %}
{% load humanize %}

{% block page-meta %}
<!-- Site URL -->
<meta property="og:url" content="https://www.politico.com/election-results/{{year}}/{{state}}/" />
<link rel="canonical" href="https://www.politico.com/election-results/{{year}}/{{state}}/" />
<!-- Project title -->
<meta property="twitter:title" content="Live {{ year }} {{ state|title }} Election Results" />
<meta property="og:title" content="Live {{ year }} {{ state|title }} Election Results" />
<!-- Project description -->
<meta property="twitter:description" content="See results, maps and live coverage." />
<meta property="og:description" content="See results, maps and live coverage." />
<meta name="description" content="See results, maps and live coverage." />
<!-- Keywords -->
<meta property="og:keywords" content="Live {{ year }} {{ state|title }} Election Results, {{ year }} {{ state|title }} Election Results, Live {{ year }} {{ state|title }}, 2018 election, Live election results" />
{% endblock %}

{% block api %}
<script>
  window.appConfig = {
    api: {
      results: '{{ paths.results }}',
      context: '{{ paths.context }}?format=json',
      timestamp: '{{ paths.timestamp }}',
      geoCounty: '{{ paths.geo_county }}',
      geoDistrict: '{{ paths.geo_district }}',
    },
    stateFips: '{{ division.code }}',
    statePostal: '{{ division.code_components.postal }}',
    stateSlug: '{{ division.slug }}',
  };
</script>
{% endblock %}

{% block content %}
<header class="center">
  <div class="share">
     <a href="" class="icon icon-facebook" target="_blank"></a>
     <a href="" class="icon icon-twitter" target="_blank"></a>
     <a class="icon icon-mail" target="_blank"></a>
  </div>
  <h1>{{ year }} {{ state|title }} Election Results</h1>
</header>

<div id="app">
  <div class="chatter">{{ content.chatter|safe }}</div>

  {% for election in elections %}
  <h2>{{ election.office.name }} {{ election.primary_party }}</h2>

  {% if election.table_votes %}
  <table>
    <thead>
      <th>Candidate</th>
      <th>Vote Count</th>
      <th>Vote Pct</th>
      <th>Winner</th>
    </thead>
    <tbody>
      {% for vote in election.table_votes|dictsortreversed:"count" %}
        <tr>
          <td>{{ vote.first }} {{ vote.last }}</td>
          <td>{{ vote.count|intcomma }}</td>
          <td>{{ vote.pct|floatformat }}%</td>
          <td>{% if vote.winner %}WINNER{% endif %}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}

  {% endfor %}
</div>
{%endblock%}

{% block relative_foot %}
<!-- <script type="text/javascript" src="{{ paths.js }}"></script> -->
{% endblock %}
